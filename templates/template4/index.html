<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Radio News Hub</title>
  
  <!-- Favicon Configuration -->
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/icon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/icon-72x72.png">
  <link rel="shortcut icon" href="/assets/icons/icon-96x96.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/assets/icons/icon-152x152.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/assets/icons/icon-144x144.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/assets/icons/icon-128x128.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/assets/icons/icon-128x128.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/assets/icons/icon-96x96.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/assets/icons/icon-72x72.png">
  <link rel="apple-touch-icon" href="/assets/icons/icon-152x152.png">
  
  <!-- PWA Configuration -->
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#1a1a2e">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Radio News Hub">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="application-name" content="Radio News Hub">
  
  <link rel="stylesheet" href="assets/css/style.css">
  <link rel="stylesheet" href="/assets/css/loading-styles.css">
  <link rel="stylesheet" href="/assets/css/pwa-installer.css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Georgia:wght@400;700&family=Open+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  
  <!-- Mobile Menu Fix -->
  <style>
    @media (max-width: 768px) {
      .mobile-menu-toggle {
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
      }
    }
  </style>
</head>
<body>
  
  <!-- Header -->
  <header class="news-header">
    <div class="header-top">
      <div class="container">
        <div class="header-info">
          <div class="date-weather">
            <span class="current-date" id="current-date"></span>
            <div class="live-indicator">
              <span class="live-dot"></span>
              <span>EN VIVO</span>
            </div>
          </div>

        </div>
      </div>
    </div>
    
    <div class="header-main">
      <div class="container">
        <div class="logo-section">
          <img id="news-logo" src="" alt="Logo" style="display: none;">
        </div>
        
        <div class="header-actions">
          <div class="header-social-main" id="header-social-main">
            <!-- Social links will be loaded here -->
          </div>
        </div>
      </div>
    </div>
    
    <nav class="main-navigation">
      <div class="container">
        <ul class="nav-menu">
          <li><a href="#" class="nav-link active" data-section="home">
            <i class="fas fa-home"></i>
            <span>Inicio</span>
          </a></li>
          <li><a href="#" class="nav-link" data-section="news">
            <i class="fas fa-newspaper"></i>
            <span>Noticias</span>
          </a></li>
          <li><a href="#" class="nav-link" data-section="programs">
            <i class="fas fa-microphone"></i>
            <span>Programas</span>
          </a></li>
          <li><a href="#" class="nav-link" data-section="multimedia">
            <i class="fas fa-play-circle"></i>
            <span>Multimedia</span>
          </a></li>
          <li><a href="#" class="nav-link" data-section="sponsors">
            <i class="fas fa-handshake"></i>
            <span>Auspiciadores</span>
          </a></li>
          <li class="mobile-social-item">
            <div class="mobile-menu-social" id="mobile-menu-social">
              <!-- Social links will be loaded here -->
            </div>
          </li>
        </ul>
        
        <button class="mobile-menu-toggle">
          <i class="fas fa-bars"></i>
        </button>
      </div>
    </nav>
  </header>

  <!-- Fixed Audio Player -->
  <div class="fixed-player" id="fixed-player">
    <div class="player-content">
      <div class="now-playing">
        <div class="track-artwork">
          <img id="player-artwork" src="" alt="Now Playing" style="display: none;">
          <div class="default-artwork">
            <i class="fas fa-music"></i>
          </div>
        </div>
        <div class="track-info">
          <div class="track-title" id="player-song-title">Radio News Hub</div>
          <div class="track-artist" id="player-song-artist">En Vivo</div>
        </div>
      </div>
      
      <div class="player-controls">
        <button class="control-btn" id="main-play-btn">
          <i class="fas fa-play"></i>
        </button>
        <div class="volume-control">
          <i class="fas fa-volume-up"></i>
          <input type="range" class="volume-slider" min="0" max="100" value="50">
        </div>
        <div class="player-stats">
          <span><i class="fas fa-users"></i> <span id="player-listeners">0</span></span>
          <span><i class="fas fa-signal"></i> <span id="player-bitrate">N/A</span> kbps</span>
        </div>
      </div>
      
      <button class="player-toggle" id="player-toggle">
        <i class="fas fa-chevron-up"></i>
      </button>
    </div>
  </div>

  <!-- Main Content -->
  <main class="news-main">
    
    <!-- Home Section -->
    <section id="home-section" class="news-section active">
      
      <!-- Hero Carousel -->
      <div class="hero-section">
        <div class="container">
          <div class="hero-carousel-container">
            <div class="swiper hero-swiper">
              <div class="swiper-wrapper" id="hero-carousel">
                <!-- Hero slides will be loaded here -->
                <div class="swiper-slide">
                  <div class="hero-slide loading-slide">
                    <div class="loading-skeleton"></div>
                  </div>
                </div>
              </div>
              <div class="swiper-pagination"></div>
              <div class="swiper-button-next"></div>
              <div class="swiper-button-prev"></div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Main Content Grid -->
      <div class="content-grid">
        <div class="container">
          <div class="grid-layout">
            
            <!-- Main Content Column -->
            <div class="main-content">
              
              <!-- Breaking News Ticker -->
              <div class="breaking-news" data-aos="fade-up">
                <div class="breaking-label">
                  <i class="fas fa-bolt"></i>
                  <span>ÚLTIMAS NOTICIAS</span>
                </div>
                <div class="breaking-ticker">
                  <div class="ticker-content" id="breaking-ticker">
                    <!-- Breaking news will be loaded here -->
                  </div>
                </div>
              </div>
              
              <!-- Featured News Grid -->
              <div class="featured-news" data-aos="fade-up" data-aos-delay="100">
                <h2 class="section-title">Noticias Destacadas</h2>
                <div class="news-masonry" id="featured-news-grid">
                  <!-- Featured news cards will be loaded here -->
                  <div class="loading-grid">
                    <div class="news-card-skeleton"></div>
                    <div class="news-card-skeleton"></div>
                    <div class="news-card-skeleton"></div>
                  </div>
                </div>
              </div>
              
              <!-- Programs Today -->
              <div class="programs-today" data-aos="fade-up" data-aos-delay="200">
                <h2 class="section-title">Programación de Hoy</h2>
                <div class="programs-timeline" id="programs-timeline">
                  <!-- Programs timeline will be loaded here -->
                </div>
              </div>
              
            </div>
            
            <!-- Sidebar -->
            <aside class="sidebar">
              
              <!-- Live Stats Widget -->
              <div class="widget stats-widget" data-aos="fade-left">
                <div class="widget-header">
                  <h3>En Vivo Ahora</h3>
                  <div class="live-pulse"></div>
                </div>
                <div class="stats-content">
                  <div class="stat-item">
                    <div class="stat-icon">
                      <i class="fas fa-users"></i>
                    </div>
                    <div class="stat-info">
                      <span class="stat-number" id="sidebar-listeners">0</span>
                      <span class="stat-label">Oyentes</span>
                    </div>
                  </div>
                  <div class="stat-item">
                    <div class="stat-icon">
                      <i class="fas fa-music"></i>
                    </div>
                    <div class="stat-info">
                      <span class="stat-number" id="sidebar-songs">0</span>
                      <span class="stat-label">Canciones hoy</span>
                    </div>
                  </div>
                  <div class="stat-item">
                    <div class="stat-icon">
                      <i class="fas fa-signal"></i>
                    </div>
                    <div class="stat-info">
                      <span class="stat-number" id="sidebar-quality">HD</span>
                      <span class="stat-label">Calidad</span>
                    </div>
                  </div>
                </div>
              </div>
              
              <!-- Recent Tracks Widget -->
              <div class="widget tracks-widget" data-aos="fade-left" data-aos-delay="100">
                <div class="widget-header">
                  <h3>Últimas Canciones</h3>
                </div>
                <div class="tracks-list" id="recent-tracks">
                  <!-- Recent tracks will be loaded here -->
                </div>
              </div>
              
              <!-- Quick News Widget -->
              <div class="widget quick-news-widget" data-aos="fade-left" data-aos-delay="200">
                <div class="widget-header">
                  <h3>Noticias Rápidas</h3>
                </div>
                <div class="quick-news-list" id="quick-news">
                  <!-- Quick news will be loaded here -->
                </div>
              </div>
              
              <!-- Sponsors Widget -->
              <div class="widget sponsors-widget" data-aos="fade-left" data-aos-delay="300">
                <div class="widget-header">
                  <h3>Nuestros Patrocinadores</h3>
                </div>
                <div class="sponsors-carousel">
                  <div class="swiper sponsors-swiper">
                    <div class="swiper-wrapper" id="sponsors-carousel">
                      <!-- Sponsors will be loaded here -->
                    </div>
                    <div class="swiper-pagination"></div>
                  </div>
                </div>
              </div>
              
            </aside>
            
          </div>
        </div>
      </div>
      
    </section>

    <!-- News Section -->
    <section id="news-section" class="news-section">
      <div class="container">
        <div class="news-grid-container">
          <div class="news-grid" id="all-news-grid">
            <!-- All news will be loaded here -->
          </div>
          <div class="load-more-container">
            <button class="load-more-btn" id="load-more-news">
              <i class="fas fa-plus"></i>
              <span>Cargar Más Noticias</span>
            </button>
          </div>
        </div>
      </div>
    </section>

    <!-- Programs Section -->
    <section id="programs-section" class="news-section">
      <div class="container">
        
        <!-- Weekly Schedule Navigation -->
        <div class="weekly-schedule-nav" data-aos="fade-up" data-aos-delay="100">
          <button class="day-btn" data-day="lunes">Lunes</button>
          <button class="day-btn" data-day="martes">Martes</button>
          <button class="day-btn" data-day="miercoles">Miércoles</button>
          <button class="day-btn" data-day="jueves">Jueves</button>
          <button class="day-btn" data-day="viernes">Viernes</button>
          <button class="day-btn" data-day="sabado">Sábado</button>
          <button class="day-btn" data-day="domingo">Domingo</button>
        </div>
        
        <!-- Programs by Day -->
        <div class="programs-by-day" data-aos="fade-up" data-aos-delay="200">
          
          <!-- Lunes -->
          <div class="day-programs" id="lunes-programs">
            <h2 class="day-title">Programación del Lunes</h2>
            <div class="programs-grid" id="lunes-grid">
              <!-- Programs for Monday will be loaded here -->
            </div>
          </div>
          
          <!-- Martes -->
          <div class="day-programs" id="martes-programs">
            <h2 class="day-title">Programación del Martes</h2>
            <div class="programs-grid" id="martes-grid">
              <!-- Programs for Tuesday will be loaded here -->
            </div>
          </div>
          
          <!-- Miércoles -->
          <div class="day-programs" id="miercoles-programs">
            <h2 class="day-title">Programación del Miércoles</h2>
            <div class="programs-grid" id="miercoles-grid">
              <!-- Programs for Wednesday will be loaded here -->
            </div>
          </div>
          
          <!-- Jueves -->
          <div class="day-programs" id="jueves-programs">
            <h2 class="day-title">Programación del Jueves</h2>
            <div class="programs-grid" id="jueves-grid">
              <!-- Programs for Thursday will be loaded here -->
            </div>
          </div>
          
          <!-- Viernes -->
          <div class="day-programs" id="viernes-programs">
            <h2 class="day-title">Programación del Viernes</h2>
            <div class="programs-grid" id="viernes-grid">
              <!-- Programs for Friday will be loaded here -->
            </div>
          </div>
          
          <!-- Sábado -->
          <div class="day-programs" id="sabado-programs">
            <h2 class="day-title">Programación del Sábado</h2>
            <div class="programs-grid" id="sabado-grid">
              <!-- Programs for Saturday will be loaded here -->
            </div>
          </div>
          
          <!-- Domingo -->
          <div class="day-programs" id="domingo-programs">
            <h2 class="day-title">Programación del Domingo</h2>
            <div class="programs-grid" id="domingo-grid">
              <!-- Programs for Sunday will be loaded here -->
            </div>
          </div>
          
        </div>

      </div>
    </section>

    <!-- Multimedia Section -->
    <section id="multimedia-section" class="news-section">
      <div class="container">
        
        <div class="multimedia-tabs" data-aos="fade-up" data-aos-delay="100">
          <button class="tab-btn active" data-tab="podcasts">
            <i class="fas fa-podcast"></i>
            <span>Podcasts</span>
          </button>
          <button class="tab-btn" data-tab="videocasts">
            <i class="fas fa-broadcast-tower"></i>
            <span>Videocasts</span>
          </button>
        </div>
        
        <div class="multimedia-content">
          <div id="podcasts-tab" class="tab-content active">
            <div class="media-grid" id="podcasts-grid">
              <!-- Podcasts will be loaded here -->
            </div>
          </div>
          
          <div id="videocasts-tab" class="tab-content">
            <div class="media-grid" id="videocasts-grid">
              <!-- Videocasts will be loaded here -->
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Sponsors Section -->
    <section id="sponsors-section" class="news-section">
      <div class="container">
        
        <div class="sponsors-grid" id="all-sponsors-grid" data-aos="fade-up" data-aos-delay="100">
          <!-- All sponsors will be loaded here -->
        </div>
      </div>
    </section>

  </main>

  <!-- Footer -->
  <footer class="news-footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <div class="footer-brand">
            <img id="footer-logo" src="" alt="Logo" style="display: none;">
            <h3 id="footer-title">Radio News Hub</h3>
            <p id="footer-description">Tu fuente confiable de noticias y entretenimiento las 24 horas del día.</p>
          </div>
          <div class="footer-social">
            <h4>Síguenos</h4>
            <div class="social-links" id="footer-social">
              <!-- Social links will be loaded here -->
            </div>
          </div>
        </div>
        
        <div class="footer-section">
          <h4>Navegación</h4>
          <ul class="footer-links">
            <li><a href="#" onclick="newsHub.showSection('home')">Inicio</a></li>
            <li><a href="#" onclick="newsHub.showSection('news')">Noticias</a></li>
            <li><a href="#" onclick="newsHub.showSection('programs')">Programas</a></li>
            <li><a href="#" onclick="newsHub.showSection('multimedia')">Multimedia</a></li>
          </ul>
        </div>
        
        <div class="footer-section">
          <h4>Información</h4>
          <div class="footer-info">
            <p><i class="fas fa-broadcast-tower"></i> Transmitiendo 24/7</p>
            <p><i class="fas fa-users"></i> <span id="footer-listeners">0</span> oyentes conectados</p>
            <p><i class="fas fa-signal"></i> Calidad HD</p>
          </div>
        </div>
        
        <div class="footer-section">
          <h4>Newsletter</h4>
          <p>Recibe las últimas noticias en tu email</p>
          <div class="newsletter-form">
            <input type="email" placeholder="Tu email" class="newsletter-input">
            <button class="newsletter-submit">
              <i class="fas fa-paper-plane"></i>
            </button>
          </div>
        </div>
      </div>
      
      <div class="footer-bottom">
        <div class="copyright">
          <p>&copy; 2025 <span id="footer-radio-name">Radio News Hub</span>. Todos los derechos reservados.</p>
        </div>
        <div class="footer-meta">
          <span>Diseñado para la mejor experiencia informativa</span>
        </div>
      </div>
    </div>
  </footer>

  <!-- Audio Element -->
  <audio id="news-audio" preload="none"></audio>

  <!-- Loading Overlay -->
  <div class="loading-overlay" id="loading-overlay">
    <div class="loading-content">
      <div class="loading-logo">
        <img id="loading-logo-img" src="/assets/icons/icon-512x512.png" alt="Logo" class="loading-logo-image">
        <div class="logo-animation"></div>
      </div>
      <h2 id="loading-title">Cargando...</h2>
      <div class="loading-progress">
        <div class="progress-bar"></div>
      </div>
      <p id="loading-subtitle">Preparando las últimas noticias...</p>
    </div>
  </div>

  <!-- Newsletter Modal -->
  <div class="modal-overlay" id="newsletter-modal">
    <div class="modal-content">
      <button class="modal-close">
        <i class="fas fa-times"></i>
      </button>
      <div class="modal-header">
        <h3>Suscríbete a nuestro Newsletter</h3>
        <p>Recibe las noticias más importantes directamente en tu email</p>
      </div>
      <div class="modal-body">
        <form class="newsletter-form-modal">
          <input type="email" placeholder="Tu dirección de email" required>
          <button type="submit">
            <i class="fas fa-envelope"></i>
            <span>Suscribirse</span>
          </button>
        </form>
      </div>
    </div>
  </div>

  <!-- News Modal -->
  <div class="modal-overlay" id="news-modal">
    <div class="modal-content news-modal-content">
      <button class="modal-close" onclick="newsHub.closeNewsModal()">
        <i class="fas fa-times"></i>
      </button>
      <div class="modal-header">
        <h2 id="news-modal-title">Título de la Noticia</h2>
        <div class="news-modal-meta">
          <span id="news-modal-date">
            <i class="fas fa-calendar"></i>
            <span></span>
          </span>
          <span id="news-modal-author" style="display: none;">
            <i class="fas fa-user"></i>
            <span></span>
          </span>
        </div>
      </div>
      <div class="modal-body">
        <img class="news-modal-image" id="news-modal-image" src="" alt="" style="display: none;">
        <div class="news-modal-content" id="news-modal-content"></div>
      </div>
    </div>
  </div>

  <!-- Podcast Modal -->
  <div class="modal-overlay" id="podcast-modal">
    <div class="modal-content podcast-modal-content">
      <button class="modal-close" onclick="newsHub.closePodcastModal()">
        <i class="fas fa-times"></i>
      </button>
      <div class="modal-header">
        <div class="podcast-modal-info">
          <img class="podcast-modal-image" id="podcast-modal-image" src="" alt="">
          <div class="podcast-modal-text">
            <h2 id="podcast-modal-title">Título del Podcast</h2>
            <p id="podcast-modal-episode">Episodio #1</p>
          </div>
        </div>
      </div>
      <div class="modal-body">
        <div class="podcast-description">
          <p id="podcast-modal-description">Descripción del podcast</p>
        </div>
        <div class="podcast-player">
          <audio controls id="podcast-audio" style="width: 100%;">
            <!-- Audio source will be loaded here -->
          </audio>
        </div>
        <div class="podcast-meta">
          <span id="podcast-modal-duration">
            <i class="fas fa-clock"></i>
            <span>Duración</span>
          </span>
        </div>
      </div>
    </div>
  </div>

  <!-- Videocast Modal -->
  <div class="modal-overlay" id="videocast-modal">
    <div class="modal-content videocast-modal-content">
      <button class="modal-close" onclick="newsHub.closeVideocastModal()">
        <i class="fas fa-times"></i>
      </button>
      <div class="modal-header">
        <div class="videocast-modal-info">
          <h2 id="videocast-modal-title">Título del Videocast</h2>
          <p id="videocast-modal-episode">Episodio #1</p>
        </div>
      </div>
      <div class="modal-body">
        <div class="videocast-container" id="videocast-container">
          <!-- Video iframe will be loaded here -->
        </div>
        <div class="videocast-description">
          <p id="videocast-modal-description">Descripción del videocast</p>
        </div>
        <div class="videocast-meta">
          <span id="videocast-modal-duration">
            <i class="fas fa-clock"></i>
            <span>Duración</span>
          </span>
        </div>
      </div>
    </div>
  </div>

  <script src="/assets/js/loading-manager.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script src="/assets/js/title-updater.js"></script>
  <script src="/assets/js/mobile-enhancements.js"></script>
  <script src="/assets/js/pwa-installer.js"></script>
  
  <!-- Mobile Menu Initialization -->
  <script>
    // Force menu to start closed on mobile
    document.addEventListener('DOMContentLoaded', () => {
      const navMenu = document.querySelector('.nav-menu');
      const menuToggle = document.querySelector('.mobile-menu-toggle');
      
      if (navMenu) {
        navMenu.classList.remove('active');
        console.log('Template4: Menu forced to closed state on load');
      }
      if (menuToggle) {
        menuToggle.classList.remove('active');
      }
    });
  </script>
  
  <script type="module" src="assets/js/main.js"></script>
  
  <!-- Loading Manager Inline -->
  <script>
    // Loading Manager ejecutado inmediatamente
    class LoadingManager {
      constructor() {
        this.loadingOverlay = null;
        this.loadingTitle = null;
        this.loadingSubtitle = null;
        this.loadingLogo = null;
        this.progressBar = null;
        this.currentProgress = 0;
        this.init();
      }

      init() {
        this.loadingOverlay = document.getElementById('loading-overlay');
        this.loadingTitle = document.getElementById('loading-title');
        this.loadingSubtitle = document.getElementById('loading-subtitle');
        this.loadingLogo = document.getElementById('loading-logo-img');
        this.progressBar = document.querySelector('.progress-bar');
        
        console.log('LoadingManager: Inicializado');
        if (this.loadingOverlay) {
          this.startLoading();
        }
      }

      async startLoading() {
        try {
          console.log('LoadingManager: Iniciando carga...');
          await this.loadBasicData();
          await this.simulateProgress();
        } catch (error) {
          console.error('LoadingManager: Error:', error);
          setTimeout(() => this.hide(), 1000);
        }
      }

      async loadBasicData() {
        try {
          this.updateProgress(10, 'Iniciando aplicación...');
          await this.delay(900);
          
          this.updateProgress(25, 'Conectando con IPStream...');
          await this.delay(1100);
          
          const configResponse = await fetch('/config/config.json');
          const config = await configResponse.json();
          
          this.updateProgress(45, 'Cargando datos de la radio...');
          await this.delay(1300);
          
          // Usar el project_name del config local
          if (config.project_name) {
            this.updateTitle(`Cargando ${config.project_name}`);
            await this.delay(600);
          }
          
          this.updateProgress(65, 'Personalizando experiencia...');
          await this.delay(900);
          
          // Cargar datos de la API para el logo
          try {
            const apiUrl = `${config.ipstream_base_url}/${config.clientId}/basic-data`;
            const response = await fetch(apiUrl);
            const data = await response.json();
            
            if (data.logoUrl) {
              this.updateLogo(`https://dashboard.ipstream.cl${data.logoUrl}`);
              await this.delay(600);
            }
          } catch (apiError) {
            console.warn('LoadingManager: Error cargando logo desde API:', apiError);
          }
          
          this.updateProgress(85, 'Aplicando configuración...');
          await this.delay(1100);
          
        } catch (error) {
          console.error('LoadingManager: Error cargando datos:', error);
          await this.delay(1000);
        }
      }

      async simulateProgress() {
        this.updateProgress(95, 'Preparando interfaz...');
        await this.delay(800);
        
        this.updateProgress(100, '¡Listo para comenzar!');
        await this.delay(1200);
        
        this.hide();
      }

      updateProgress(percentage, message = null) {
        this.currentProgress = percentage;
        
        if (this.progressBar) {
          this.progressBar.style.width = `${percentage}%`;
        }
        
        if (message && this.loadingSubtitle) {
          this.loadingSubtitle.textContent = message;
        }
        
        console.log(`LoadingManager: ${percentage}% - ${message}`);
      }

      updateTitle(title) {
        if (this.loadingTitle) {
          this.loadingTitle.textContent = title;
        }
      }

      updateSubtitle(subtitle) {
        if (this.loadingSubtitle) {
          this.loadingSubtitle.textContent = subtitle;
        }
      }

      updateLogo(logoUrl) {
        if (this.loadingLogo) {
          const img = new Image();
          img.onload = () => {
            this.loadingLogo.src = logoUrl;
          };
          img.src = logoUrl;
        }
      }

      hide() {
        if (this.loadingOverlay) {
          this.loadingOverlay.classList.add('hidden');
          setTimeout(() => {
            this.loadingOverlay.style.display = 'none';
          }, 500);
        }
      }

      delay(ms) {
        return new Promise(resolve => setTimeout(resolve, ms));
      }
    }

    // Crear instancia inmediatamente
    window.loadingManager = new LoadingManager();
  </script>

  <!-- PWA Service Worker Registration -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/service-worker.js')
          .then(registration => {
            console.log('SW registered: ', registration);
          })
          .catch(registrationError => {
            console.log('SW registration failed: ', registrationError);
          });
      });
    }
  </script>
</body>
</html>